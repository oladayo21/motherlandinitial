# Motherland SC - Project Context for Claude

## 🎯 Project Overview

This is the official website monorepo for Motherland SC, a football club. The project consists of:
- **Payload CMS**: Content management system for managing teams, players, matches, news, and media
- **Astro Frontend**: Public-facing website displaying club information, match schedules, player profiles, and news
- **MongoDB**: Database running in Docker for local development

### Current Status
- ✅ Monorepo structure set up with pnpm workspaces
- ✅ Payload CMS configured with MongoDB
- ✅ Astro frontend integrated from previous project
- ⏳ Need to create Payload collections for football club content
- ⏳ Need to connect frontend to CMS API

## 🏗️ Architecture

```
motherlandsc/
├── cms/                    # Payload CMS (Next.js based)
│   ├── collections/       # Content models (Users, Media, TODO: Teams, Players, Matches, News)
│   ├── src/app/          # Next.js app directory
│   └── docker-compose.yml # MongoDB configuration
├── frontend/              # Astro static site
│   ├── src/
│   │   ├── components/   # UI components (Hero, Navbar, Cards, etc.)
│   │   ├── pages/       # Routes (teams, match-center, news, gallery)
│   │   └── styles/      # Tailwind CSS
│   └── public/          # Static assets (logos, team photos)
├── package.json          # Root workspace configuration
├── pnpm-workspace.yaml   # Workspace definition
└── Makefile             # Development commands
```

## 💻 Tech Stack

### Backend (CMS)
- **Payload CMS 3.52**: Headless CMS with admin panel
- **Next.js 15.4**: React framework (used by Payload)
- **MongoDB 7.0**: Database (runs in Docker)
- **TypeScript**: Type safety
- **GraphQL & REST APIs**: Auto-generated by Payload

### Frontend
- **Astro 5.12**: Static site generator
- **Tailwind CSS 4.1**: Utility-first CSS
- **TypeScript**: Type safety

### Development Tools
- **pnpm**: Package manager (DO NOT use npm)
- **Docker**: For MongoDB only (not for app containers)
- **Make**: Task automation

## 📋 Common Commands

**ALWAYS use Make commands** when available:

```bash
# Development
make dev            # Start everything (MongoDB, CMS, Frontend)
make dev-cms        # Start CMS + MongoDB only
make dev-frontend   # Start frontend only

# Database
make mongo-shell    # Access MongoDB shell
make mongo-backup   # Create backup
make mongo-restore  # Restore from backup

# Build & Test
make build          # Build all packages
make test          # Run all tests
make format        # Format code
make lint          # Run linters

# Maintenance
make install       # Install dependencies
make clean        # Remove Docker volumes (⚠️ deletes data)
```

## 🔗 Service URLs

- **Frontend**: http://localhost:4321
- **CMS Admin**: http://localhost:3000/admin
- **CMS API**: http://localhost:3000/api
- **GraphQL Playground**: http://localhost:3000/api/graphql-playground
- **MongoDB**: mongodb://localhost:27017/motherlandsc-cms

## 📁 Key Files to Know

### Configuration Files
- `.env` files are gitignored (use `.env.example` as reference)
- `cms/payload.config.ts` - Payload CMS configuration
- `frontend/astro.config.mjs` - Astro configuration
- `Makefile` - All development commands

### Important Components
- `frontend/src/components/Hero.astro` - Main hero section
- `frontend/src/components/TeamHero.astro` - Team page hero
- `frontend/src/components/cards/*.astro` - Card components for content
- `frontend/src/pages/teams/men/*.astro` - Men's team pages

## 🎨 Design System

### Brand Colors (from frontend styles)
- Primary: Red/Burgundy theme
- Secondary: White/Light backgrounds
- Accent: Gold/Yellow for highlights

### UI Components
- Hero sections with background images
- Card-based layouts for players, matches, news
- Responsive grid layouts using Tailwind

## 📝 Development Guidelines

### Code Style
- Use TypeScript for type safety
- Follow existing component patterns
- Use Tailwind classes for styling
- Keep components small and focused

### Git Workflow
- Use conventional commits (feat:, fix:, chore:, etc.)
- Create feature branches
- Test before committing
- Keep commits atomic

### Package Management
- **NEVER use npm** - always use pnpm
- Run `pnpm install` at root for all packages
- Dependencies are shared via pnpm workspace

## 🏈 Football Club Domain

### Content Types Needed in CMS
1. **Teams**: Men's team, youth teams, women's team
2. **Players**: Profile, position, number, stats, photo
3. **Matches**: Date, opponent, score, venue, competition
4. **News/Articles**: Title, content, featured image, category
5. **Gallery**: Photo collections from matches and events
6. **Staff**: Coaches, management, support staff

### Key Pages
- Home: Hero, latest news, next match, featured players
- Teams: Roster, fixtures, results, league table
- Match Center: Live scores, fixtures, results
- News: Articles, announcements, press releases
- Gallery: Photo galleries from matches and events
- Club: History, achievements, facilities

## 🚀 Immediate Priorities

1. **Create Payload Collections**:
   - Teams collection
   - Players collection with relationships to teams
   - Matches collection with home/away teams
   - News/Articles collection
   - Gallery collection for media

2. **Connect Frontend to CMS**:
   - Set up API calls from Astro to Payload
   - Replace static data with dynamic content
   - Implement image optimization

3. **Authentication & Permissions**:
   - Set up admin users
   - Configure public API access
   - Protect sensitive endpoints

## ⚠️ Important Notes

- MongoDB runs WITHOUT authentication in development (simplified setup)
- The `.env` files contain sensitive data and are gitignored
- Multiple `node_modules` folders are normal in pnpm workspaces
- Always check Makefile for commands before running directly
- Frontend currently uses static data - needs CMS integration

## 🐛 Known Issues

- Initial `pnpm install` in Docker takes time (run locally instead)
- Hot reload might need manual refresh occasionally
- MongoDB data persists in Docker volumes (use `make clean` to reset)

## 📚 Useful Resources

- [Payload CMS Docs](https://payloadcms.com/docs)
- [Astro Docs](https://docs.astro.build)
- [Tailwind CSS Docs](https://tailwindcss.com/docs)
- [pnpm Workspace Docs](https://pnpm.io/workspaces)

---

When assisting with this project:
1. Always use Make commands when available
2. Follow the existing patterns and conventions
3. Prioritize CMS collection creation and frontend integration
4. Maintain the football club context (teams, players, matches)
5. Use pnpm, never npm
6. Test changes with both CMS and frontend running